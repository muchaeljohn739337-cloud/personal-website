# ============================================
# ADVANCIA PAYLEDGER - Backend Environment Configuration
# ============================================
# Copy this file to .env and update with real values
# NEVER commit .env to Git!

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL (Primary Database - Required)
# For local development (PostgreSQL recommended):
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/advancia_payledger?schema=public"

# For production (PostgreSQL - Render provides this automatically):
# DATABASE_URL="postgresql://user:password@host:5432/database"

# MongoDB (Analytics & Logging - Optional)
# Get free cluster at: https://cloud.mongodb.com
MONGODB_URI="mongodb+srv://username:password@cluster.xxxxx.mongodb.net/advancia_ledger?retryWrites=true&w=majority"
MONGODB_DB_NAME="advancia_ledger"
MONGODB_CACHE_ENABLED=true
MONGODB_LOGS_ENABLED=true

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=4000
NODE_ENV=development
FRONTEND_URL="http://localhost:3000"
BACKEND_URL="http://localhost:4000"

# ============================================
# JWT & AUTHENTICATION
# ============================================
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="24h"
SESSION_SECRET="your-session-secret-key-change-this-in-production"

# ============================================
# GOOGLE OAUTH AUTHENTICATION
# ============================================
# Get these from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID="your-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-client-secret"
GOOGLE_REDIRECT_URI="http://localhost:4000/api/auth/google/callback"

# ============================================
# ============================================

# ============================================
# STRIPE PAYMENTS
# ============================================
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
STRIPE_WEBHOOK_SECRET="whsec_your_stripe_webhook_secret"
STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"

# ============================================
# CRYPTO.COM PAY INTEGRATION
# ============================================
# Get API credentials from: https://crypto.com/pay/merchant
CRYPTO_COM_API_KEY="your_crypto_com_api_key"
CRYPTO_COM_SECRET_KEY="your_crypto_com_secret_key"
CRYPTO_COM_WEBHOOK_SECRET="your_crypto_com_webhook_secret"

# ============================================
# ALCHEMY PAY INTEGRATION
# ============================================
# Get API credentials from: https://alchemypay.org/
ALCHEMY_PAY_API_KEY="your_alchemy_pay_api_key"
ALCHEMY_PAY_SECRET_KEY="your_alchemy_pay_secret_key"
ALCHEMY_PAY_MERCHANT_ID="your_alchemy_merchant_id"
ALCHEMY_PAY_WEBHOOK_SECRET="your_alchemy_webhook_secret"

# ============================================
# WEB PUSH NOTIFICATIONS
# ============================================
VAPID_PUBLIC_KEY="your-vapid-public-key"
VAPID_PRIVATE_KEY="your-vapid-private-key"
VAPID_SUBJECT="mailto:support@advanciapayledger.com"

# ============================================
# EMAIL SERVICE
# ============================================
# Resend (Primary - Recommended for production)
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY="re_your_resend_api_key_here"
EMAIL_FROM="noreply@advanciapayledger.com"

# SendGrid (Alternative)
SENDGRID_API_KEY="SG.your_sendgrid_api_key_here"

# SMTP (Fallback - for development or backup)
# Recommended: Use Gmail with an App Password (https://myaccount.google.com/apppasswords)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-email-app-password"
EMAIL_USER="your-email@gmail.com"
EMAIL_PASSWORD="your-email-app-password"
EMAIL_REPLY_TO="support@advanciapayledger.com"

## Legacy Email Patterns (kept for backward compatibility)
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT="587"
EMAIL_USER="your-email@gmail.com"
EMAIL_PASSWORD="your-email-app-password"
EMAIL_REPLY_TO="support@your-custom-domain.tld"

## Legacy SMTP Pattern (used by scripts)
SMTP_SERVER="smtp.gmail.com"
ADMIN_EMAIL="yourname@yourdomain.com"

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""

# ============================================
# DEVELOPMENT & DEBUGGING
# ============================================
API_KEY="dev-api-key-123-change-in-production"
DEBUG="app:*"
LOG_LEVEL="debug"

# ============================================
# CORS & SECURITY
# ============================================
ALLOWED_ORIGINS="http://localhost:3000,https://advanciapayledger.com"
RATE_LIMIT_MAX="100"
RATE_LIMIT_WINDOW="900000"

# ==================================
# FRONTEND
# ==================================
FRONTEND_URL="https://your-app.onrender.com"

# ==================================
# JWT & AUTHENTICATION
# ==================================
# Generate secure secrets: openssl rand -base64 32
JWT_SECRET_ENCRYPTED="your-encrypted-jwt-secret"
JWT_EXPIRATION="7d"
SESSION_SECRET="your-session-secret"

# ==================================
# ETHEREUM & WEB3
# ==================================
ETH_PROVIDER_URL="https://ethereum.publicnode.com"
# Or use Cloudflare: https://cloudflare-eth.com

# ==================================
# OPTIONAL SERVICES
# ==================================
# Email (Nodemailer)
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT="587"
EMAIL_USER="your-email@gmail.com"
EMAIL_PASSWORD="your-app-password"


# Stripe
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."

# ==================================
# ADMIN SETTINGS
# ==================================
ADMIN_WALLET_ADDRESS="0x..."
TREASURY_PRIVATE_KEY="0x..."  # Keep this SUPER secure!
ADMIN_KEY="supersecureadminkey123-change-in-production"

# ==================================
# MEDBED / DOCTOR CONSULTATION SYSTEM
# ==================================
# Invite code required for doctor registration
DOCTOR_INVITE_CODE="ADVANCIA2025MEDBED"

# Jitsi video conferencing domain (default: meet.jit.si)
JITSI_DOMAIN="meet.jit.si"

# ==================================
# SMS VERIFICATION (SMS POOL)
# ==================================
# SMS Pool API for phone verification
# Get your API key from: https://www.smspool.net/
SMSPOOL_API_KEY="your-smspool-api-key"
SMSPOOL_SERVICE_ID="1"  # 1 = Any service (default)

# ==================================
# MARKETING & EMAIL CONFIGURATION
# ==================================
# Email service (Gmail, SendGrid, etc.)
EMAIL_SERVICE="gmail"
EMAIL_USER="your-email@gmail.com"
EMAIL_PASSWORD="your-app-specific-password"
ADMIN_EMAIL="admin@advanciapayledger.com"

# Mailchimp integration
MAILCHIMP_API_KEY="your-mailchimp-api-key"
MAILCHIMP_SERVER_PREFIX="us1"  # e.g., "us1", "us2", etc.
MAILCHIMP_LIST_ID="your-mailchimp-list-id"

# Marketing tracking
GOOGLE_ANALYTICS_ID="G-XXXXXXXXXX"

# API Keys (if needed)
# STRIPE_SECRET_KEY=
# STRIPE_PUBLISHABLE_KEY=

# ==================================
# GITHUB INTEGRATION (RPA/CI/CD)
# ==================================
# Personal Access Token for GitHub API access (repo, workflow permissions)
GITHUB_PAT="ghp_your_personal_access_token_here"
GITHUB_OWNER="muchaeljohn739337-cloud"
GITHUB_REPO="modular-saas-platform"

# ==================================
# CLOUDFLARE R2 OBJECT STORAGE
# ==================================
# High-performance file storage with zero egress charges
# Get these from: Cloudflare Dashboard → R2 → Manage R2 API Tokens
R2_ACCOUNT_ID="your-cloudflare-account-id"
R2_ACCESS_KEY_ID="your-r2-access-key-id"
R2_SECRET_ACCESS_KEY="your-r2-secret-access-key"
R2_BUCKET_NAME="advancia-documents"
# Optional: Public domain for R2 bucket (if configured)
R2_PUBLIC_URL="https://pub-your-account-id.r2.dev"

# ============================================
# CLOUDFLARE PROTECTION & CDN
# ============================================
# Enable Cloudflare integration
CLOUDFLARE_ENABLED=true
CLOUDFLARE_ZONE_ID="your-cloudflare-zone-id"
CLOUDFLARE_API_TOKEN="your-cloudflare-api-token"

# Cloudflare Turnstile (CAPTCHA alternative)
# Get keys from: Cloudflare Dashboard → Turnstile
TURNSTILE_SITE_KEY="your-turnstile-site-key"
TURNSTILE_SECRET_KEY="your-turnstile-secret-key"

# Trust proxy headers (required when behind Cloudflare)
TRUST_PROXY=true
CLOUDFLARE_IPS_ONLY=false

# ============================================
# SECURITY & IP WHITELISTING
# ============================================
# Admin IP whitelist (comma-separated, leave empty to allow all)
# Add your IPs here to restrict admin access
# Example: 84.239.41.201,203.0.113.0,127.0.0.1
ADMIN_IP_WHITELIST=""

# API rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# DDoS protection
ENABLE_DDOS_PROTECTION=true
MAX_REQUESTS_PER_SECOND=50

# ============================================
# TAILSCALE VPN CONFIGURATION
# ============================================
# Enable Tailscale VPN requirement for sensitive endpoints
# Get auth keys from: https://login.tailscale.com/admin/settings/keys
TAILSCALE_ENABLED=false
TAILSCALE_AUTH_KEY=""
# Comma-separated list of authorized Tailscale IPs (100.x.x.x range)
# Example: 100.64.0.1,100.64.0.5,100.64.0.10
TAILSCALE_ADMIN_IPS=""
